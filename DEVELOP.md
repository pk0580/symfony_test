# Этапы разработки обучающего приложения на Symfony

Это руководство описывает последовательность шагов для создания обучающего приложения на базе PHP фреймворка Symfony. Приложение будет развернуто с использованием Docker.

## Этап 1: Подготовка инфраструктуры (Docker) [ВЫПОЛНЕНО]

1.  **Настройка Docker-окружения**:
    *   Создание `docker-compose.yaml`.
    *   Настройка сервисов:
        *   `php-fpm` (версия 8.2 или 8.3).
        *   `nginx` (в качестве веб-сервера).
        *   `database` (MySQL).
        *   `redis` (для кеширования и очередей).
        *   `prometheus` и `grafana` (для мониторинга и метрик).
        *   `adminer` или `phpMyAdmin` (для управления БД).
    *   Создание `Dockerfile` для PHP с необходимыми расширениями (pdo_mysql, intl, zip, и т.д.) и интеграцией `zerolog` (для логирования).
2.  **Настройка Composer**:
    *   Обеспечение работы Composer внутри контейнера.
3.  **Проверка запуска**:
    *   Запуск контейнеров и проверка доступности базовой страницы.

## Этап 2: Инициализация Symfony [ВЫПОЛНЕНО]
- **Сборка PHP 8.4**: Выполнена полная сборка образа с необходимыми расширениями (intl, zip, gd, pdo_mysql, opcache).
- **Symfony CLI**: Установлен и настроен.
- **Пакет webapp**: Установлен, Symfony инициализирован.
- **Инфраструктура**: Подключены MySQL, Redis, Prometheus, Grafana.

## Этап 3: Основы (MVC и Маршрутизация)

1.  **Контроллеры и маршруты**:
    *   Создание первого контроллера.
    *   Изучение аннотаций/атрибутов для маршрутизации.
2.  **Шаблонизатор Twig**:
    *   Создание базового макета (`base.html.twig`).
    *   Работа с наследованием шаблонов и переменными.
3.  **Assets (Webpack Encore или AssetMapper)**:
    *   Подключение стилей и скриптов.

## Этап 4: Работа с данными (Doctrine ORM)

1.  **Проектирование сущностей**:
    *   Создание сущностей с помощью `make:entity`.
    *   Настройка связей (One-To-Many, Many-To-Many).
2.  **Миграции**:
    *   Создание и выполнение миграций для обновления схемы БД.
3.  **Фикстуры**:
    *   Установка `orm-fixtures` и наполнение БД тестовыми данными.
4.  **Репозитории**:
    *   Написание кастомных запросов в репозиториях.

## Этап 5: Формы и Валидация

1.  **Создание форм**:
    *   Использование `make:form`.
2.  **Обработка форм**:
    *   Логика обработки в контроллерах (handleRequest).
3.  **Валидация**:
    *   Добавление правил валидации (Constraints) в сущности или DTO.

## Этап 6: Безопасность (Security)

1.  **Аутентификация**:
    *   Настройка сущности `User` и провайдера.
    *   Создание формы логина (`make:auth`).
2.  **Авторизация**:
    *   Разграничение прав доступа (Roles, Voters).
3.  **Хеширование паролей**:
    *   Настройка `PasswordHasher`.

## Этап 7: Сервисы и Dependency Injection

1.  **Создание сервисов**:
    *   Вынос бизнес-логики из контроллеров в отдельные классы.
2.  **Конфигурация DI**:
    *   Понимание `services.yaml`, autowiring и autoconfiguration.

## Этап 8: Продвинутые темы (Опционально)

1.  **API Platform**:
    *   Быстрое создание REST API.
2.  **Messenger**:
    *   Работа с очередями сообщений.
3.  **Тестирование**:
    *   Написание Unit и Functional тестов с использованием PHPUnit.

## Этап 9: Финализация и Документирование

1.  **Оптимизация**:
    *   Настройка кеширования.
2.  **Документация кода**:
    *   Использование PHPDoc и написание README.
3.  **Подготовка к Production**:
    *   Проверка конфигурации для боевого режима.
